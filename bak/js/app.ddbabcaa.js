(function(t){function e(e){for(var o,r,a=e[0],l=e[1],c=e[2],u=0,m=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},s=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"b5656c3b"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=r(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"1f68":function(t,e,n){},"26a0":function(t,e,n){"use strict";n("bf4a")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=(n("1f68"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),s=[],r=(n("034f"),n("2877")),a={},l=Object(r["a"])(a,i,s,!1,null,null,null),c=l.exports,u=(n("d3b7"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fetching?t._e():n("div",{staticClass:"container my-12 mx-auto px-4 body-font md:px-12"},[n("h1",{staticClass:"text-center font-bold text-5xl mb-8"},[t._v("OCG - Booking Meeting Room")]),n("p",{staticClass:"text-center font-medium text-xl mb-4"},[t._v(t._s(t.getCurrentDay))]),n("div",{staticClass:"flex flex-wrap -mx-1 lg:-mx-4"},[t.fetching?t._l(3,(function(e){return n("div",{key:e,staticClass:"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3"},[n("div",{staticClass:"overflow-hidden rounded-lg shadow-md mb-8 transition hover:shadow-lg"},[n("div",{staticClass:"lg:h-48 bg-gray-400 md:h-36 w-full object-cover object-center"}),n("h2",{staticClass:"bg-gray-300 animate-pulse w-1/4 mx-auto my-4 leading-tight p-2 md:p-4 rounded"}),n("div",{staticClass:"p-x2 md:px-4"},[t._l(3,(function(e){return n("div",{key:e,staticClass:"list-item-loading mb-2 md:mb-4 border-b"},[t._m(0,!0),n("h1",{staticClass:"w-2/3 mb-4 h-3 animate-pulse rounded bg-gray-300"})])})),n("button",{staticClass:"bg-blue-300 w-full h-8 animate-pulse mt-2 rounded-lg p-x2 md:px-4 md:mb-4"})],2)])])})):t._l(t.listMeetings,(function(e,o){return n("div",{key:o,staticClass:"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3"},[n("article",{staticClass:"overflow-hidden rounded-lg shadow-md mb-8 transition hover:shadow-lg"},[n("div",{staticClass:"card-image bg-gray-200"},[n("img",{staticClass:"block h-auto w-full",attrs:{alt:"Placeholder",src:"https://picsum.photos/600/400/?random="+o}})]),n("header",{staticClass:"flex items-center justify-center leading-tight p-2 md:p-4"},[n("h1",{staticClass:"text-lg text-black font-bold"},[t._v(" "+t._s(0!==o?o+3+"th Floor":o+3+"rd Floor")+" ")])]),n("div",{staticClass:"list p-x2 md:px-4"},[0===e.list.length?n("div",{staticClass:"mx-auto max-width-empty-state"},[n("img",{attrs:{src:"https://tailwindcomponents.com/svg/undraw_no_data_qbuo.svg",alt:""}}),n("p",{staticClass:"text-center mt-4 font-medium"},[t._v("This room has not been booked yet")])]):t._e(),t._l(e.list,(function(e,o){return n("div",{key:e.id,staticClass:"list-item mb-2 md:mb-4 border-b"},[n("div",{staticClass:"flex justify-between items-center"},[n("div",{staticClass:"owner flex items-center"},[n("img",{staticClass:"block rounded-full",attrs:{alt:"Placeholder",src:"https://picsum.photos/32/32/?random="+o}}),n("span",{staticClass:"font-medium ml-2"},[t._v(t._s(e.username))])]),n("div",{staticClass:"time text-white font-medium bg-gray-400 p-2 rounded-lg"},[t._v(t._s(t.getTime(e.time_start))+" - "+t._s(t.getTime(e.time_end))+" ")])]),n("p",{staticClass:"meeting-goal mt-2 mb-3 font-medium"},[t._v(t._s(e.goal))]),e.can_delete?n("div",{staticClass:"flex justify-end mb-3"},[n("button",{staticClass:"bg-red-400 py-1 px-4 rounded text-white font-medium",on:{click:function(n){return t.handleCancel(e.id)}}},[t._v("Cancel")])]):t._e()])}))],2),n("footer",{staticClass:"flex items-center leading-none p-2 md:p-4"},[n("button",{staticClass:"bg-blue-500 text-white font-medium p-3 rounded-lg w-full",on:{click:function(n){return t.onClick(e.id)}}},[t._v("Booking ")])])])])}))],2),t.visible?n("ModalCreate",{attrs:{visible:t.visible,"room-id":Number(t.floor)},on:{"update:visible":function(e){t.visible=e},"booking-successfully":function(e){return t.fetch()}}}):t._e(),t.visibleModalRemove?n("ModalRemove",{attrs:{id:Number(t.bookingID),visible:t.visibleModalRemove},on:{"update:visible":function(e){t.visibleModalRemove=e},"cancel-successfully":function(e){return t.fetch()}}}):t._e()],1)},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-between items-center"},[n("p",{staticClass:"leading-relaxed mb-3 w-8 h-8 rounded-full animate-pulse bg-gray-300"}),n("p",{staticClass:"leading-relaxed mb-3 w-1/3 h-3 rounded animate-pulse bg-gray-300"})])}],f=(n("99af"),n("7db0"),n("a9e3"),n("25f0"),n("96cf"),n("1da1")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"antialiased bg-gray-200 bg-opacity-75 text-gray-900 font-sans overflow-x-hidden fixed top-0 left-0 w-full"},[n("div",{staticClass:"relative px-4 min-h-screen md:flex md:items-center md:justify-center"},[n("div",{staticClass:"modal-overlay w-full h-full absolute z-10 inset-0",on:{click:t.onClose}}),n("div",{staticClass:"bg-white rounded-lg w-full md:max-w-screen-sm md:mx-auto p-8 fixed inset-x-0 bottom-0 z-50 mb-4 mx-4 md:relative"},[n("h2",{staticClass:"text-center font-semibold text-2xl mb-6"},[t._v("Booking meeting room - "+t._s(0!==t.roomId?t.roomId+2+"th Floor":t.roomId+2+"rd Floor")+" ")]),n("div",{staticClass:"md:flex items-center"},[n("form",{staticClass:"contact-form w-full",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"contact-form-group mb-6 relative"},[n("p",{staticClass:"font-semibold mb-2"},[t._v("Meeting goal:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.goal,expression:"form.goal"}],staticClass:"py-2 px-4 bg-white rounded-lg placeholder-gray-400 text-gray-900 appearance-none inline-block w-full border border-gray-400 transition focus:outline-none focus:ring-1 focus:ring-blue-600",attrs:{id:"goal",type:"text",required:""},domProps:{value:t.form.goal},on:{focus:function(e){t.visibleSuggestion=!0},input:function(e){e.target.composing||t.$set(t.form,"goal",e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleSuggestion,expression:"visibleSuggestion"}],staticClass:"suggestion absolute border border-gray-200 rounded-lg mt-2 py-2 text-gray-900 bg-white shadow-xl w-full inset-x-0 z-10"},t._l(t.suggestions,(function(e){return n("span",{key:e,staticClass:"hover:bg-blue-400 hover:text-white transition-all z-10 text-left block px-4 py-1",on:{click:function(n){return t.onSelectSuggest(e)}}},[t._v(t._s(e))])})),0)]),n("div",{staticClass:"contact-form-group mb-6"},[n("p",{staticClass:"font-semibold mb-2"},[t._v("Start time:")]),n("div",{staticClass:"flex-shrink w-full inline-block relative"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.start,expression:"form.start"}],staticClass:"block appearance-none text-gray-600 w-full bg-white border border-gray-400 shadow-inner px-4 py-2 pr-8 rounded",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"start",e.target.multiple?n:n[0])}}},[n("option",[t._v("Please choose one...")]),t._l(t.timeItems,(function(e,o){return n("option",{key:o,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2),n("div",{staticClass:"pointer-events-none absolute top-0 mt-3  right-0 flex items-center px-2 text-gray-600"},[n("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]),n("div",{staticClass:"contact-form-group mb-6"},[n("p",{staticClass:"font-semibold mb-2"},[t._v("End time:")]),n("div",{staticClass:"flex-shrink w-full inline-block relative"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.end,expression:"form.end"}],staticClass:"block appearance-none text-gray-600 w-full bg-white border border-gray-400 shadow-inner px-4 py-2 pr-8 rounded",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"end",e.target.multiple?n:n[0])}}},[n("option",[t._v("Please choose one...")]),t._l(t.timeItems,(function(e,o){return n("option",{key:o,domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2),n("div",{staticClass:"pointer-events-none absolute top-0 mt-3  right-0 flex items-center px-2 text-gray-600"},[n("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[n("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])])])]),n("p",{staticClass:"text-red-500"},[t._v(t._s(t.errorMessage))]),n("div",{staticClass:"text-center md:text-right mt-4 md:flex md:justify-end"},[n("button",{staticClass:"flex justify-center px-4 w-24 h-10 md:py-2 bg-blue-500 text-white rounded-lg font-bold text-sm md:ml-2 md:order-2 focus:outline-none",on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("Spinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}]},[t._v("Complete")])],1),n("button",{staticClass:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-gray-200 rounded-lg font-semibold text-sm mt-4\n        md:mt-0 md:order-1",on:{click:t.onClose}},[t._v("Cancel")])])])])])},g=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-6 w-6"})},h=[],b={name:"Spinner"},x=b,w=(n("a56c"),Object(r["a"])(x,v,h,!1,null,"5570f31c",null)),y=w.exports,C=(n("ac1f"),n("1276"),function(t){var e=(t||"").split(":");if(e.length>=2){var n=parseInt(e[0],10),o=parseInt(e[1],10);return{hours:n,minutes:o}}return null}),_=function(t,e){var n=C(t),o=C(e),i=n.minutes+60*n.hours,s=o.minutes+60*o.hours;return i===s?0:i>s?1:-1},k=function(t){return(t.hours<10?"0"+t.hours:t.hours)+":"+(t.minutes<10?"0"+t.minutes:t.minutes)},j=function(t,e){var n=C(t),o=C(e),i={hours:n.hours,minutes:n.minutes};return i.minutes+=o.minutes,i.hours+=o.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,k(i)},S=function(t,e,n,o){var i=[],s="",r="";if(t&&e&&n){var a=t,l=o;while(_(a,e)<=0)i.push({value:l++,label:a,disabled:_(a,s||"-1:-1")<=0||_(a,r||"100:100")>=0}),a=j(a,n)}return i},M={name:"ModalCreate",components:{Spinner:y},props:{visible:{type:Boolean,default:!1},roomId:{type:Number,default:0}},data:function(){return{isLoading:!1,start:"08:00",end:"19:30",step:"00:30",visibleSuggestion:!1,suggestions:["Grooming meeting","Planing meeting","OKR meeting","Interview","1 on 1","Other"],form:{token:"",room_id:this.roomId||0,start:"",end:"",goal:""},errorMessage:"",timeItems:[]}},created:function(){this.timeItems=S("08:00","19:30","00:30",16)},methods:{onClose:function(){this.$emit("update:visible",!this.visible)},onSelectSuggest:function(t){this.form.goal=t,this.visibleSuggestion=!1},onSubmit:function(){var t=this;this.isLoading=!0,this.form.token=localStorage.getItem("booking-token"),fetch("http://booking.vn/api/booking.php",{method:"post",body:JSON.stringify(this.form)}).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:o=e.sent,o.success?(t.isLoading=!1,t.$emit("booking-successfully"),t.onClose()):(t.isLoading=!1,t.errorMessage=o.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw t.isLoading=!1,e}))}}},O=M,I=(n("26a0"),Object(r["a"])(O,p,g,!1,null,"147daeb2",null)),R=I.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"antialiased font-sans overflow-x-hidden fixed top-0 left-0 w-full"},[n("div",{staticClass:"relative px-4 min-h-screen md:flex md:items-center md:justify-center"},[n("div",{staticClass:"modal-overlay w-full h-full absolute z-10 inset-0",on:{click:t.onClose}}),n("div",{staticClass:"bg-white rounded-lg md:max-w-md md:mx-auto p-4 fixed inset-x-0 bottom-0 z-50 mb-4 mx-4 md:relative"},[t._m(0),n("div",{staticClass:"text-center md:text-right mt-4 md:flex md:justify-end"},[n("button",{staticClass:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-red-200 text-red-700 rounded-lg font-semibold text-sm md:ml-2 md:order-2",on:{click:function(e){return t.onCancel()}}},[t._v("Cancel Booking")]),n("button",{staticClass:"block w-full md:inline-block md:w-auto px-4 py-3 md:py-2 bg-gray-200 rounded-lg font-semibold text-sm mt-4\n        md:mt-0 md:order-1",on:{click:function(e){return t.onClose()}}},[t._v("Keep")])])])])])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md:flex items-center"},[n("div",{staticClass:"mt-4 md:mt-0 md:ml-6 text-center md:text-left"},[n("p",{staticClass:"font-bold"},[t._v("Cancel your booking")]),n("p",{staticClass:"text-sm text-gray-700 mt-1"},[t._v("Are you sure? ")])])])}],P={name:"ModalRemove",props:{visible:{type:Boolean,default:!1},id:{type:Number,default:0}},data:function(){return{isLoading:!1}},methods:{onClose:function(){this.$emit("update:visible",!this.visible)},onCancel:function(){var t=this;this.isLoading=!0;var e=localStorage.getItem("booking-token"),n={token:e,id:this.id};fetch("http://booking.vn/api/delete.php",{method:"post",body:JSON.stringify(n)}).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:o=e.sent,o.success&&(t.isLoading=!1,t.$emit("cancel-successfully"),t.onClose());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw t.isLoading=!1,e}))}}},E=P,N=(n("8baf"),Object(r["a"])(E,$,L,!1,null,"592e143a",null)),B=N.exports,z={name:"Home",components:{ModalCreate:R,ModalRemove:B},data:function(){return{visible:!1,visibleModalRemove:!1,floor:0,listMeetings:[],fetching:!0,time:[],token:"",bookingID:0}},computed:{getCurrentDay:function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1,o=t.getFullYear();return e<10&&(e="0".concat(e)),n<10&&(n="0".concat(n)),t="".concat(e,"/").concat(n,"/").concat(o),t}},created:function(){this.time=S("00:00","23:30","00:30",0),this.fetch()},beforeCreate:function(){var t=localStorage.getItem("booking-token");t?localStorage.setItem("booking-token",t):this.$router.push({path:"/"})},methods:{fetch:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.fetching=!0,n=localStorage.getItem("booking-token"),e.next=4,fetch("http://booking.vn/api/room.php?type=list&token=".concat(n)).then((function(e){e.json().then((function(e){t.listMeetings=e.data}))}));case 4:t.fetching=!1;case 5:case"end":return e.stop()}}),e)})))()})),onClick:function(t){this.visible=!0,this.floor=t},getTime:function(t){var e=this.time.find((function(e){return e.value===Number(t)}));return e.label},handleCancel:function(t){this.visibleModalRemove=!0,this.bookingID=t}}},D=z,T=(n("81aa"),Object(r["a"])(D,d,m,!1,null,"000c3018",null)),A=T.exports,F=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{staticStyle:{margin:"15% 50%"},attrs:{href:"https://slack.com/oauth/v2/authorize?client_id=2337620625.421907403488&scope=users%3Aread%2Cusers%3Aread.email&user_scope=&redirect_uri=&state=&granular_bot_scope=1&single_channel=0&install_redirect=&tracked=1&team="}},[n("img",{attrs:{src:"https://api.slack.com/img/sign_in_with_slack.png"}})])])}],J={name:"Index",beforeCreate:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.query.token,n||(n=localStorage.getItem("booking-token")),n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("http://booking.vn/api/oauth.php?token=".concat(n)).then((function(e){e.json().then((function(e){e.success&&(localStorage.setItem("booking-token",n),t.$router.push({path:"/home"}))}))}));case 6:case"end":return e.stop()}}),e)})))()}},G=J,H=Object(r["a"])(G,F,q,!1,null,null,null),K=H.exports;o["a"].use(u["a"]);var Y=[{path:"/",name:"Index",component:K,meta:{title:"Booking Meeting Room Index"}},{path:"/home",name:"Home",component:A,meta:{title:"Booking Meeting Room"}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Q=new u["a"]({mode:"history",base:"/",routes:Y}),U=Q,V=n("2f62");o["a"].use(V["a"]);var W=new V["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:U,store:W,render:function(t){return t(c)}}).$mount("#app")},"81aa":function(t,e,n){"use strict";n("d7ac")},"85ec":function(t,e,n){},"8baf":function(t,e,n){"use strict";n("cdae")},"992d":function(t,e,n){},a56c:function(t,e,n){"use strict";n("992d")},bf4a:function(t,e,n){},cdae:function(t,e,n){},d7ac:function(t,e,n){}});
//# sourceMappingURL=app.ddbabcaa.js.map